[{"kind":1,"language":"markdown","value":"## SAS Data Preparation","outputs":[]},{"kind":1,"language":"markdown","value":"##### Concatenate North American(exclude Alaska) and Mexican BumbleBee data","outputs":[]},{"kind":1,"language":"markdown","value":"Know thy data using PROC CONTENTS. Before concatenating tables, first ensure that both datasets have the same structure (i.e., same variable names and types).","outputs":[]},{"kind":1,"language":"markdown","value":"üêù Time to cross-pollinate our data! Scientific names like Bombus pensylvanicus may wow the entomologists, but for the rest of us, a friendly common name makes the buzz more relatable. Let‚Äôs merge our grand North American + Mexican bumblebee dataset(dsconc) with a lookup table of common names(ds3) ‚Äî so every bee gets a name we can all appreciate. üåºüîó","outputs":[]},{"kind":2,"language":"sas","value":"proc contents data=dst1;\nrun;\nproc contents data=dst2;\nrun;","outputs":[]},{"kind":1,"language":"markdown","value":"Merge your buzzing data colonies! üêù\nUse the SET statement to bring together the North American and Mexican bumblebee datasets into one vibrant hive of pollinator insights. üåéüçØ","outputs":[]},{"kind":2,"language":"sas","value":"data dsconc;\nset dst1 dst2;\nrun;","outputs":[]},{"kind":1,"language":"markdown","value":"Why did the concatenation fail?\n\nDuring the Access phase, we used PROC IMPORT to convert CSVs into SAS datasets. By default, PROC IMPORT \"guesses\" the data structure by examining the first 20 rows to determine variable types and lengths. It assigns the most prevalent data type (numeric or character) to each column. If most of the first 20 rows are missing, SAS defaults to the character data type, and any subsequent numeric values are set to missing. This is why the column occurenceID defined as Character in the Mexican bumblebee data conflicts with the numeric OccurenceId in the North American Bumblebee dataset.   The DATA step, however, offers more control, granularity, and precision for importing data","outputs":[]},{"kind":2,"language":"sas","value":"data dst1;\ninfile \"/workspaces/myfolder/Pharmasug25/pattern_decline_N_American_Bumblebees.csv\"  dsd firstobs=2;\ninput \nid \ninstitutionCode : $8. \ncollectionCode : $4. \nbasisOfRecord : $17.  \noccurrenceID :$9.\ncatalognumber: $12. \nrecordedBy $\nyear\nmonth \nday \ncountry :$6. \nstateProvince  : $16.\ncounty : $17.\nlocality  : $37. \nverbatimLatitude  \nverbatimLongitude \nidentifiedBy : $18.\nscientificName  : $20. \nkingdom  : $8. \nphylum  : $10. \nclass : $7. \norder  : $11. \nfamily  : $6. \ngenus :  $6. \nspecificEpithet : $13. \nscientificNameAuthorship : $13. \n;\n\nrun;\n\n\ndata dst2;\ninfile \"/workspaces/myfolder/Pharmasug25/pattern_decline_Mexican_Bumblebees.csv\"  dsd firstobs=2;\ninput \nid \ninstitutionCode : $8. \ncollectionCode : $4. \nbasisOfRecord : $17.  \noccurrenceID :$9.\ncatalognumber: $12. \nrecordedBy $\nyear\nmonth \nday \ncountry :$6. \nstateProvince  : $16.\ncounty : $17.\nlocality  : $37. \nverbatimLatitude  \nverbatimLongitude \nidentifiedBy : $18.\nscientificName  : $20. \nkingdom  : $8. \nphylum  : $10. \nclass : $7. \norder  : $11. \nfamily  : $6. \ngenus :  $6. \nspecificEpithet : $13. \nscientificNameAuthorship : $13. \n;\nrun;\n","outputs":[{"items":[{"data":"[\n\t{\n\t\t\"line\": \"1316  /** LOG_START_INDICATOR **/\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1317  title;footnote;ods _all_ close;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1318  ods graphics on;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1319  ods html5(id=vscode) style=HTMLEncore options(bitmap_mode='inline' svg_mode='inline');\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"NOTE: Writing HTML5(VSCODE) Body file: sashtml46.htm\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1320  %let _SASPROGRAMFILE = %nrquote(%nrstr(/workspaces/myfolder/Pharmasug25/3SASPrepare.sasnb));\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1321  data dst1;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1322  infile \\\"/workspaces/myfolder/Pharmasug25/pattern_decline_N_American_Bumblebees.csv\\\"  dsd firstobs=2;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1323  input\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1324  id\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1325  institutionCode : $8.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1326  collectionCode : $4.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1327  basisOfRecord : $17.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1328  occurrenceID :$9.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1329  catalognumber: $12.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1330  recordedBy $\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1331  year\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1332  month\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1333  day\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1334  country :$6.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1335  stateProvince  : $16.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1336  county : $17.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1337  locality  : $37.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"37                                                         The SAS System                         Thursday, May 22, 2025 01:17:00 AM\",\n\t\t\"type\": \"title\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"\",\n\t\t\"type\": \"title\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1338  verbatimLatitude\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1339  verbatimLongitude\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1340  identifiedBy : $18.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1341  scientificName  : $20.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1342  kingdom  : $8.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1343  phylum  : $10.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1344  class : $7.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1345  order  : $11.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1346  family  : $6.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1347  genus :  $6.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1348  specificEpithet : $13.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1349  scientificNameAuthorship : $13.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1350  ;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1351  \",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1352  run;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"NOTE: The infile \\\"/workspaces/myfolder/Pharmasug25/pattern_decline_N_American_Bumblebees.csv\\\" is:\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      Filename=/workspaces/myfolder/Pharmasug25/pattern_decline_N_American_Bumblebees.csv,\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      Owner Name=sas,Group Name=sas,\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      Access Permission=-rw-------,\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      Last Modified=22May2025:01:21:03,\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      File Size (bytes)=15836577\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"NOTE: 66907 records were read from the infile \\\"/workspaces/myfolder/Pharmasug25/pattern_decline_N_American_Bumblebees.csv\\\".\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      The minimum record length was 173.\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      The maximum record length was 333.\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"NOTE: The data set WORK.DST1 has 66907 observations and 26 variables.\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"NOTE: DATA statement used (Total process time):\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      real time           0.13 seconds\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      cpu time            0.13 seconds\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      \",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1353  \",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1354  \",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1355  data dst2;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1356  infile \\\"/workspaces/myfolder/Pharmasug25/pattern_decline_Mexican_Bumblebees.csv\\\"  dsd firstobs=2;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1357  input\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1358  id\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1359  institutionCode : $8.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1360  collectionCode : $4.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1361  basisOfRecord : $17.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1362  occurrenceID :$9.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1363  catalognumber: $12.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1364  recordedBy $\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1365  year\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1366  month\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1367  day\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1368  country :$6.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1369  stateProvince  : $16.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1370  county : $17.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1371  locality  : $37.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1372  verbatimLatitude\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1373  verbatimLongitude\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1374  identifiedBy : $18.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1375  scientificName  : $20.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1376  kingdom  : $8.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1377  phylum  : $10.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1378  class : $7.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"38                                                         The SAS System                         Thursday, May 22, 2025 01:17:00 AM\",\n\t\t\"type\": \"title\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"\",\n\t\t\"type\": \"title\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1379  order  : $11.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1380  family  : $6.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1381  genus :  $6.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1382  specificEpithet : $13.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1383  scientificNameAuthorship : $13.\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1384  ;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1385  run;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"NOTE: The infile \\\"/workspaces/myfolder/Pharmasug25/pattern_decline_Mexican_Bumblebees.csv\\\" is:\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      Filename=/workspaces/myfolder/Pharmasug25/pattern_decline_Mexican_Bumblebees.csv,\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      Owner Name=sas,Group Name=sas,\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      Access Permission=-rw-------,\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      Last Modified=22May2025:01:21:03,\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      File Size (bytes)=5490\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"NOTE: 24 records were read from the infile \\\"/workspaces/myfolder/Pharmasug25/pattern_decline_Mexican_Bumblebees.csv\\\".\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      The minimum record length was 197.\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      The maximum record length was 234.\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"NOTE: The data set WORK.DST2 has 24 observations and 26 variables.\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"NOTE: DATA statement used (Total process time):\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      real time           0.00 seconds\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      cpu time            0.01 seconds\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"      \",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"\",\n\t\t\"type\": \"note\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1386  \",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t},\n\t{\n\t\t\"line\": \"1387  ;*';*\\\";*/;run;quit;ods html5(id=vscode) close;\",\n\t\t\"type\": \"source\",\n\t\t\"version\": 1\n\t}\n]","mime":"application/vnd.sas.compute.log.lines"}]}]},{"kind":1,"language":"markdown","value":"üêù Before diving into the nectar of analysis, let‚Äôs peek inside each hive's blueprint! Here's where we inspect the metadata of our two bee tables ‚Äî and keep a close eye on the column OccurrenceId, which might be causing a buzz due to mismatched types. üçØüîç","outputs":[]},{"kind":2,"language":"sas","value":"proc contents data=dst1 varnum;\nrun;\nproc contents data=dst2 varnum;\nrun;","outputs":[]},{"kind":1,"language":"markdown","value":"üêù Time to cross-pollinate our data! Scientific names like Bombus pensylvanicus may wow the entomologists, but for the rest of us, a friendly common name makes the buzz more relatable. Let‚Äôs merge our grand North American + Mexican bumblebee dataset(dsconc) with a lookup table of common names(ds3) ‚Äî so every bee gets a name we can all appreciate. üåºüîó","outputs":[]},{"kind":2,"language":"sas","value":"data dsconc;\nset dst1(where=(country <> 'Alaska')) dst2;\nrun;","outputs":[]},{"kind":2,"language":"sas","value":"proc contents data=dsconc;\nrun;","outputs":[]},{"kind":2,"language":"sas","value":"proc contents data=dst3;\nrun;","outputs":[]},{"kind":2,"language":"sas","value":"data dsmerge;\n    merge dsconc dst3;\n    by scientificname;\nrun;","outputs":[]},{"kind":1,"language":"markdown","value":"Prep the datasets for merge by running a PROC SORT to ensure both datasets are ordered properly by scientificName","outputs":[]},{"kind":2,"language":"sas","value":"proc sort data=dsconc;\n    by scientificname;\nrun;\nproc sort data=dst3;\nby scientificname;\nrun;","outputs":[]},{"kind":1,"language":"markdown","value":"üêù Bringing bees together! This code merges two hives‚Äîdsconc and dst3‚Äîby scientificname, keeping only the bees (rows) found in both colonies. The in= flags help check who's buzzing in from where! üêùüîó","outputs":[]},{"kind":2,"language":"sas","value":"data dsmerge;\n    merge dsconc(in=inc) dst3(in=ind);\n    by scientificname;\n    if inc and ind;\nrun;","outputs":[]},{"kind":2,"language":"sas","value":"proc print data=dsmerge(obs=5);\nrun;","outputs":[]},{"kind":2,"language":"sas","value":"proc contents data=dsmerge;\nrun;","outputs":[]}]